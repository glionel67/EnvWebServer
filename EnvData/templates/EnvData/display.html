<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EnvData</title>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>
<body>
  <h1>Temperature/humidity/pressure from BME280 sensor</h1>
  <h2>Options:</h2>
  <ul>
    <li><a href="/EnvData/display/day">Day</a></li>
    <li><a href="/EnvData/display/week">Week</a></li>
    <li><a href="/EnvData/display/month">Month</a></li>
    <li><a href="/EnvData/display/year">Year</a></li>
    <li><a href="/EnvData/display/all">All</a></li>
    <li><a href="/EnvData/realtime">Realtime</a></li>
  </ul>
  <h2>Plot:</h2>
  <!--{% autoescape off %}
  {{div}}
  {% endautoescape %}-->
  <div id="chart-temperature" class="container"></div>
  <div id="chart-humidity" class="container"></div>
  <div id="chart-pressure" class="container"></div>
  <button type="button" name="refresh" style="color: gray;" onClick="Refresh()">Refresh</button>
  <script>
    function Refresh() {
      window.parent.location = window.parent.location.href;
    }

    // Temperature plot
    var chartT = new Highcharts.Chart({
      chart:{ renderTo : 'chart-temperature' },
      title: { text: 'Temperature' },
      series: [{
        showInLegend: false,
        color: 'blue',
        name: 'Temperature',
        data: {{temperatureTable}}
      }],
      plotOptions: {
        line: { animation: false,
          dataLabels: { enabled: true }
        },
        series: { color: '#059e8a' }
      },
      xAxis: {
        type: 'datetime'
      },
      yAxis: {
        title: { text: 'Temperature [Â°C]' }
      },
      credits: { enabled: false }
    });
    // Humidity plot
    var chartH = new Highcharts.Chart({
      chart:{ renderTo:'chart-humidity' },
      title: { text: 'Humidity' },
      series: [{
        showInLegend: false,
        color: 'blue',
        name: 'Humidity',
        data: {{humidityTable}}
      }],
      plotOptions: {
        line: { animation: false,
          dataLabels: { enabled: true }
        }
      },
      xAxis: {
        type: 'datetime'
      },
      yAxis: {
        title: { text: 'Humidity [%]' }
      },
      credits: { enabled: false }
    });
    // Pressure plot
    var chartP = new Highcharts.Chart({
      chart:{ renderTo:'chart-pressure' },
      title: { text: 'Pressure' },
      series: [{
        showInLegend: false,
        color: 'blue',
        name: 'Pressure',
        data: {{pressureTable}}
      }],
      plotOptions: {
        line: { animation: false,
          dataLabels: { enabled: true }
        },
        series: { color: '#18009c' }
      },
      xAxis: {
        type: 'datetime'
      },
      yAxis: {
        title: { text: 'Pressure [Pa]' }
      },
      credits: { enabled: false }
    });
  </script>
</body>
</html>